{
  "openapi": "3.0.0",
  "info": {
    "title": "Temporal Laravel samples",
    "description": "Sample Laravel apps to run an API and workers for Temporal workflows.",
    "version": "0.0.1"
  },
  "paths": {
    "/api/workflows/{workflowId}/runs/{runId}/events": {
      "get": {
        "tags": [
          "Workflow"
        ],
        "summary": "Get workflow events",
        "description": "Get workflow events",
        "operationId": "api_get_workflow_events",
        "parameters": [
          {
            "name": "workflowId",
            "in": "path",
            "description": "The workflow id",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "runId",
            "in": "path",
            "description": "The run id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The greeting workflow events",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowEventResponse"
                }
              }
            }
          }
        }
      }
    },
    "/api/greeting/workflows": {
      "post": {
        "tags": [
          "Simple activity"
        ],
        "summary": "Start a greeting workflow",
        "description": "Start a greeting workflow",
        "operationId": "api_simple_activity_start_workflow",
        "requestBody": {
          "description": "The workflow parameters",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Greet"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Workflow successfully started",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowIds"
                }
              }
            }
          }
        }
      }
    },
    "/api/parent/workflows": {
      "post": {
        "tags": [
          "Parent/Child workflow"
        ],
        "summary": "Start a parent workflow",
        "description": "Start a parent workflow",
        "operationId": "api_parent_start_workflow",
        "requestBody": {
          "description": "The workflow parameters",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/Greet"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Workflow successfully started",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowIds"
                }
              }
            }
          }
        }
      }
    },
    "/api/money/transfer/workflows": {
      "post": {
        "tags": [
          "Money transfer"
        ],
        "summary": "Start a money transfer workflow",
        "description": "Start a money transfer workflow",
        "operationId": "api_money_transfer_start_workflow",
        "requestBody": {
          "description": "The workflow parameters",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MoneyTransfer"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Workflow successfully started",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowIds"
                }
              }
            }
          }
        }
      }
    },
    "/api/money/batch/workflows": {
      "post": {
        "tags": [
          "Money batch"
        ],
        "summary": "Start a money batch workflow",
        "description": "Start a money batch workflow",
        "operationId": "api_money_batch_start_workflow",
        "requestBody": {
          "description": "The workflow parameters",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MoneyBatch"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Workflow successfully started",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowIds"
                }
              }
            }
          }
        }
      }
    },
    "/api/money/batch/workflows/{workflowId}/_status": {
      "get": {
        "tags": [
          "Money batch"
        ],
        "summary": "Get a money batch workflow status",
        "description": "Get a money batch workflow status",
        "operationId": "api_money_batch_get_workflow_status",
        "parameters": [
          {
            "name": "workflowId",
            "in": "path",
            "description": "The workflow id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The batch workflow status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MoneyBatchStatus"
                }
              }
            }
          }
        }
      }
    },
    "/api/money/batch/workflows/{workflowId}/_withdraw": {
      "patch": {
        "tags": [
          "Money batch"
        ],
        "summary": "Withdraw on a money batch workflow",
        "description": "Withdraw on a money batch workflow",
        "operationId": "api_money_batch_withdraw_on_workflow",
        "parameters": [
          {
            "name": "workflowId",
            "in": "path",
            "description": "The workflow id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "description": "The workflow parameters",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MoneyWithdraw"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "The operation result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Result"
                }
              }
            }
          }
        }
      }
    },
    "/api/simple/batch/workflows": {
      "post": {
        "tags": [
          "Simple batch"
        ],
        "summary": "Start a simple batch workflow",
        "description": "Start a simple batch workflow",
        "operationId": "api_simple_batch_start_workflow",
        "requestBody": {
          "description": "The workflow parameters",
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SimpleBatch"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Workflow successfully started",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/WorkflowIds"
                }
              }
            }
          }
        }
      }
    },
    "/api/simple/batch/workflows/{workflowId}/_status": {
      "get": {
        "tags": [
          "Simple batch"
        ],
        "summary": "Get the status of a simple batch workflow",
        "description": "Get the status of a simple batch workflow",
        "operationId": "api_simple_batch_get_workflow_status",
        "parameters": [
          {
            "name": "workflowId",
            "in": "path",
            "description": "The workflow id",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The batch workflow status",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SimpleBatchOutputs"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "WorkflowIds": {
        "properties": {
          "workflow": {
            "title": "Workflow id",
            "description": "Workflow id",
            "type": "string",
            "format": "uuid"
          },
          "run": {
            "title": "Run id",
            "description": "Run id",
            "type": "string",
            "format": "uuid"
          }
        },
        "type": "object"
      },
      "Result": {
        "properties": {
          "success": {
            "type": "boolean"
          }
        },
        "type": "object"
      },
      "MoneyBatchStatus": {
        "properties": {
          "count": {
            "type": "integer"
          },
          "balance": {
            "type": "integer"
          }
        },
        "type": "object"
      },
      "WorkflowEvent": {
        "properties": {
          "task": {
            "type": "integer"
          },
          "type": {
            "type": "integer"
          },
          "timestamp": {
            "type": "string",
            "pattern": "^\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}$",
            "example": "2017-07-21 17:32:28"
          }
        },
        "type": "object"
      },
      "WorkflowEventResponse": {
        "properties": {
          "events": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/WorkflowEvent"
            }
          }
        },
        "type": "object"
      },
      "Greet": {
        "properties": {
          "args": {
            "properties": {
              "name": {
                "type": "string"
              }
            },
            "type": "object"
          }
        },
        "type": "object"
      },
      "MoneyTransfer": {
        "properties": {
          "args": {
            "properties": {
              "fromAccountId": {
                "type": "string"
              },
              "toAccountId": {
                "type": "string"
              },
              "referenceId": {
                "type": "string"
              },
              "amountCents": {
                "type": "integer"
              }
            },
            "type": "object"
          }
        },
        "type": "object"
      },
      "MoneyBatch": {
        "properties": {
          "args": {
            "properties": {
              "toAccountId": {
                "type": "string"
              },
              "batchSize": {
                "type": "integer"
              }
            },
            "type": "object"
          }
        },
        "type": "object"
      },
      "MoneyWithdraw": {
        "properties": {
          "args": {
            "properties": {
              "fromAccountId": {
                "type": "string"
              },
              "referenceId": {
                "type": "string"
              },
              "amountCents": {
                "type": "integer"
              }
            },
            "type": "object"
          }
        },
        "type": "object"
      },
      "SimpleBatch": {
        "properties": {
          "args": {
            "properties": {
              "batchId": {
                "type": "integer"
              }
            },
            "type": "object"
          }
        },
        "type": "object"
      },
      "SimpleBatchOutputs": {
        "properties": {
          "count": {
            "type": "integer"
          },
          "items": {
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        },
        "type": "object"
      }
    }
  },
  "tags": [
    {
      "name": "Workflow",
      "description": "Workflow"
    },
    {
      "name": "Simple activity",
      "description": "Simple activity"
    },
    {
      "name": "Parent/Child workflow",
      "description": "Parent/Child workflow"
    },
    {
      "name": "Money transfer",
      "description": "Money transfer"
    },
    {
      "name": "Money batch",
      "description": "Money batch"
    },
    {
      "name": "Simple batch",
      "description": "Simple batch"
    }
  ]
}
